import React, { useState, useContext} from 'react';
import { AuthContext } from "../../services/AuthProvider";
import Image from 'next/image';
import Link from 'next/link';
import styles  from "../../styles/Home.module.css";

function UserAuth() {
  const {loggedIn, userDetails, token, auth} = useContext(AuthContext);
  const [isauth, setIsauth] = useState("d-none");
  function toggleAuth() {
    setIsauth(isauth === "d-none" ? "" : "d-none");
  }
  if (loggedIn == true) {
    return(
      <>
      <li className="m-auth"  onClick={toggleAuth} >
        <div className={styles.auth}>
          <Image 
              objectFit="cover"
              objectPosition="center"
              placeholder="blur" 
              width="40px"
              height="40px"
              layout="responsive" 
              itemProp="image" 
              src={userDetails?.image ? process.env.NEXT_PUBLIC_REST_API + userDetails?.image : process.env.NEXT_PUBLIC_APP_IMG} 
              blurDataURL={userDetails?.image ? process.env.NEXT_PUBLIC_REST_API + userDetails?.image : process.env.NEXT_PUBLIC_APP_IMG}
              alt={userDetails?.name}
            />
          </div>
        <div className={`m-auth__box ${isauth}`}>
        <Link href={`/user/${encodeURIComponent(userDetails?.username)}`}> 
          <a className="m-auth__user"> 
            <div className="m-auth__img">
              <Image 
                objectFit="cover"
                objectPosition="center"
                placeholder="blur" 
                width="150px"
                height="150px"
                layout="responsive" 
                itemProp="image" 
                src={userDetails?.image ? process.env.NEXT_PUBLIC_REST_API + userDetails?.image : process.env.NEXT_PUBLIC_APP_IMG} 
                blurDataURL={userDetails?.image ? process.env.NEXT_PUBLIC_REST_API + userDetails?.image : process.env.NEXT_PUBLIC_APP_IMG}
                alt={userDetails?.name}
              />
            </div>
            <div className="m-auth__content"> 
              <p className="displayname">{userDetails?.name}</p>
              <p className="username">{userDetails?.email}</p>
            </div>
          </a>
        </Link>
        <Link href={`/user/${encodeURIComponent(userDetails?.username)}`}> 
          <a className="m-auth__list"> 
            <svg id="Layer_1" _ngcontent-serverapp-c42 data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" height={18} width={18}>
              <path className="cls-1" _ngcontent-serverapp-c42 d="M109.38,62.5A47.11,47.11,0,0,0,62.5,109.38V390.63a47.11,47.11,0,0,0,46.88,46.87H307.29a15.62,15.62,0,0,0,11-4.58l.16-.16L432.92,318.34a15.62,15.62,0,0,0,4.58-11V109.38A47.11,47.11,0,0,0,390.63,62.5Zm0,31.25H390.63a15.39,15.39,0,0,1,15.62,15.63V291.67H338.54a47.11,47.11,0,0,0-46.87,46.87v67.71H109.38a15.39,15.39,0,0,1-15.63-15.62V109.38A15.4,15.4,0,0,1,109.38,93.75Zm52.08,52.06a15.63,15.63,0,1,0-.44,31.25H338.54a15.63,15.63,0,1,0,.44-31.25H161.46Zm0,72.92A15.63,15.63,0,1,0,161,250H296.88a15.63,15.63,0,0,0,.44-31.25H161.46ZM338.54,322.92h45.62l-61.24,61.24V338.54A15.38,15.38,0,0,1,338.54,322.92Z" />
            </svg>
            <span>Bài viết của bạn </span>
          </a>
        </Link>
        <Link href={`/user/${encodeURIComponent(userDetails?.username)}/bookmark`}> 
          <a className="m-auth__list pl_0"> 
          <svg fill="#000000" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="27px" height="27px"><path d="M 32.5 13 A 0.50005 0.50005 0 0 0 32 13.5 L 32 15 L 30 15 C 26.698375 15 24 17.698375 24 21 L 24 79.5 C 24 82.525577 26.474423 85 29.5 85 L 75 85 A 1.0001 1.0001 0 0 0 75.333984 83.056641 C 74.059145 82.605925 73 81.032932 73 79.5 C 73 77.967068 74.059145 76.394075 75.333984 75.943359 A 1.0001 1.0001 0 0 0 76 74.931641 L 76 24 C 76 19.041484 71.958516 15 67 15 L 49 15 L 49 13.5 A 0.50005 0.50005 0 0 0 48.5 13 L 32.5 13 z M 33 14 L 48 14 L 48 43.691406 L 40.792969 40.087891 A 0.50005 0.50005 0 0 0 40.492188 39.992188 A 0.50005 0.50005 0 0 0 40.205078 40.089844 L 33 43.691406 L 33 14 z M 30 17 L 32 17 L 32 44.5 A 0.50005 0.50005 0 0 0 32.722656 44.947266 L 40 41.308594 L 40 59.5 A 0.50005 0.50005 0 1 0 41 59.5 L 41 41.308594 L 48.277344 44.947266 A 0.50005 0.50005 0 0 0 49 44.5 L 49 17 L 67 17 C 70.877484 17 74 20.122516 74 24 L 74 74 L 29.5 74 C 28.173347 74 26.95258 74.476278 26 75.265625 L 26 21 C 26 18.779625 27.779625 17 30 17 z M 40.492188 61.992188 A 0.50005 0.50005 0 0 0 40 62.5 L 40 64.5 A 0.50005 0.50005 0 1 0 41 64.5 L 41 62.5 A 0.50005 0.50005 0 0 0 40.492188 61.992188 z M 40.492188 65.992188 A 0.50005 0.50005 0 0 0 40 66.5 L 40 67.5 A 0.50005 0.50005 0 1 0 41 67.5 L 41 66.5 A 0.50005 0.50005 0 0 0 40.492188 65.992188 z M 29.5 76 L 72.162109 76 C 71.729126 76.597983 71.414601 77.279616 71.21875 78 L 31.5 78 A 0.50005 0.50005 0 1 0 31.5 79 L 71.042969 79 C 71.02802 79.166494 71 79.331265 71 79.5 C 71 79.668735 71.02802 79.833506 71.042969 80 L 40.5 80 A 0.50005 0.50005 0 1 0 40.5 81 L 71.21875 81 C 71.414601 81.720384 71.729126 82.402017 72.162109 83 L 29.5 83 C 27.555577 83 26 81.444423 26 79.5 C 26 77.555577 27.555577 76 29.5 76 z"></path></svg>
            <span>Bài viết đã lưu</span>
          </a>
        </Link>
        <Link href={`/user/${encodeURIComponent(userDetails?.username)}/like`}> 
          <a className="m-auth__list"> 
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><path d="M21.179 12.794l.013.014L12 22l-9.192-9.192.013-.014A6.5 6.5 0 0112 3.64a6.5 6.5 0 019.179 9.154zM4.575 5.383a4.5 4.5 0 000 6.364L12 19.172l7.425-7.425a4.5 4.5 0 10-6.364-6.364L8.818 9.626 7.404 8.21l3.162-3.162a4.5 4.5 0 00-5.99.334l-.001.001z"></path></svg>
            <span>Bài viết yêu thích </span>
          </a>
        </Link>
        <Link href={`/crawler`}> 
          <a className="m-auth__list">
          <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 465.001 465.001" style={{enableBackground: 'new 0 0 465.001 465.001'}} xmlSpace="preserve">
            <g>
              <path d="M387.438,55.846c-2.187-3.518-6.81-4.598-10.33-2.409c-3.518,2.188-4.596,6.812-2.409,10.329   c22.861,36.768,26.93,77.891,26.317,105.915c-0.516,23.601-4.343,42.179-6.117,49.621l-82.994,31.964l45.73-45.1   c1.18-1.164,1.941-2.686,2.165-4.328c0.169-1.241,4.107-30.861,1.232-70.174c-2.674-36.551-12.057-88.534-41.577-128.611   C317-0.282,312.304-0.993,308.97,1.462c-3.335,2.457-4.047,7.152-1.591,10.487c48.311,65.589,39.695,168.187,37.847,185.389   l-20.024,19.748c1.499-6.685,2.299-13.586,2.299-20.61c0-52.383-42.617-95-95-95s-95,42.617-95,95c0,7.024,0.8,13.926,2.3,20.611   l-20.027-19.751c-1.86-17.199-10.529-119.708,37.849-185.387c2.457-3.335,1.745-8.03-1.591-10.487   c-3.335-2.457-8.03-1.744-10.486,1.591c-29.52,40.077-38.903,92.061-41.577,128.611c-2.875,39.313,1.063,68.933,1.232,70.174   c0.224,1.643,0.985,3.164,2.165,4.328l45.73,45.1l-82.991-31.963C66.05,202.228,51.288,126.51,90.301,63.766   c2.187-3.518,1.109-8.142-2.409-10.329c-3.518-2.188-8.144-1.109-10.33,2.409c-24.9,40.045-29.277,84.434-28.564,114.619   c0.768,32.563,7.312,55.563,7.59,56.525c0.651,2.255,2.32,4.074,4.51,4.918l127.457,49.089   c-4.367,5.099-7.824,10.948-10.186,17.308l-94.375-8.456c-3.599-0.337-6.92,1.969-7.893,5.451   c-0.259,0.926-6.338,23.009-6.869,53.247c-0.708,40.362,9.007,76.027,28.096,103.142c1.46,2.074,3.781,3.184,6.139,3.184   c1.492,0,2.999-0.444,4.311-1.368c3.387-2.385,4.2-7.063,1.815-10.45c-35.271-50.1-24.743-117.388-20.456-137.685l85.873,7.694   c-0.171,1.823-0.268,3.666-0.268,5.529c0,0.896,0.027,1.786,0.068,2.672l-55.295,12.096c-3.011,0.659-5.313,3.093-5.802,6.136   c-0.505,3.138-11.84,77.383,34.086,123.309c1.464,1.464,3.384,2.196,5.303,2.196s3.839-0.732,5.303-2.196   c2.929-2.93,2.929-7.678,0-10.607c-34.107-34.106-32.018-88.658-30.46-105.326l49.499-10.827   c4.552,14.329,14.549,26.256,27.555,33.327v25.336c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5v-19.736   c4.028,0.893,8.207,1.378,12.5,1.378s8.472-0.485,12.5-1.378v19.736c0,4.143,3.358,7.5,7.5,7.5c4.142,0,7.5-3.357,7.5-7.5v-25.336   c13.006-7.071,23.003-18.998,27.555-33.327l49.499,10.827c1.558,16.677,3.645,71.222-30.46,105.326   c-2.929,2.93-2.929,7.678,0,10.607c1.464,1.464,3.384,2.196,5.303,2.196c1.919,0,3.839-0.732,5.303-2.196   c45.926-45.926,34.591-120.171,34.086-123.309c-0.49-3.043-2.791-5.477-5.802-6.136l-55.295-12.096   c0.041-0.886,0.068-1.775,0.068-2.672c0-1.863-0.097-3.706-0.268-5.529l85.881-7.695c4.309,20.275,14.887,87.472-20.464,137.686   c-2.384,3.387-1.572,8.065,1.815,10.45c1.313,0.924,2.819,1.368,4.311,1.368c2.357-0.001,4.679-1.109,6.139-3.184   c19.088-27.114,28.804-62.779,28.096-103.142c-0.53-30.238-6.61-52.321-6.869-53.247c-0.973-3.481-4.288-5.783-7.893-5.451   l-94.375,8.456c-2.362-6.359-5.818-12.209-10.185-17.308l127.457-49.089c2.19-0.844,3.859-2.663,4.51-4.918   c0.278-0.963,6.822-23.963,7.59-56.525C416.715,140.279,412.338,95.891,387.438,55.846z M232.501,361.349   c-23.576,0-42.756-19.181-42.756-42.756c0-3.448,0.408-6.811,1.176-10.042c0.084-0.271,0.155-0.547,0.209-0.831   c2.359-9.106,7.634-17.1,14.973-22.819c0.406-0.254,0.796-0.532,1.149-0.861c3.784-2.748,8.07-4.916,12.76-6.346   c3.962-1.208,6.194-5.399,4.986-9.361c-1.208-3.963-5.398-6.196-9.361-4.986c-5.242,1.599-10.112,3.878-14.533,6.72   c-29.223-12.492-48.602-41.575-48.602-73.59c0-44.112,35.888-80,80-80s80,35.888,80,80c0,32.014-19.379,61.098-48.602,73.59   c-4.422-2.842-9.292-5.121-14.534-6.72c-3.965-1.21-8.153,1.024-9.361,4.986c-1.208,3.962,1.024,8.153,4.986,9.361   c4.709,1.436,9.012,3.616,12.808,6.382c0.362,0.332,0.754,0.627,1.17,0.881c7.303,5.716,12.552,13.687,14.904,22.764   c0.054,0.284,0.125,0.561,0.209,0.831c0.768,3.23,1.176,6.594,1.176,10.042C275.257,342.168,256.077,361.349,232.501,361.349z" />
              <path d="M240.001,186.476c0-4.143-3.358-7.5-7.5-7.5s-7.5,3.357-7.5,7.5v10c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5V186.476z" />
              <path d="M202.501,148.976c-4.142,0-7.5,3.357-7.5,7.5v10c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5v-10   C210.001,152.333,206.643,148.976,202.501,148.976z" />
              <path d="M262.501,173.976c4.142,0,7.5-3.357,7.5-7.5v-10c0-4.143-3.358-7.5-7.5-7.5s-7.5,3.357-7.5,7.5v10   C255.001,170.618,258.358,173.976,262.501,173.976z" />
            </g>
          </svg> 
            <span>Cào Dữ Liệu</span>
          </a>
        </Link>
            <div className="m-auth__list"  onClick={auth.logout} >
              <svg id="Layer_1" _ngcontent-serverapp-c42 width={16} height={16} viewBox="0 0 16 16" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg">
                <path className="cls-1" _ngcontent-serverapp-c42 d="M14.4399 8.8501H5.88989C5.33989 8.8501 4.88989 8.4001 4.88989 7.8501C4.88989 7.3001 5.33989 6.8501 5.88989 6.8501H14.4399C14.9899 6.8501 15.4399 7.3001 15.4399 7.8501C15.4399 8.4001 14.9999 8.8501 14.4399 8.8501Z" />
                <path className="cls-1" _ngcontent-serverapp-c42 d="M10.5299 13.1C10.2799 13.1 10.0299 13.01 9.83992 12.82C9.43992 12.44 9.42992 11.8 9.80992 11.4L13.1399 7.91996L9.82992 4.60996C9.43992 4.21996 9.43992 3.57996 9.82992 3.18996C10.2199 2.79996 10.8599 2.79996 11.2499 3.18996L15.0699 7.00996C15.5599 7.48996 15.5699 8.29996 15.0899 8.79996L11.2699 12.79C11.0599 12.99 10.7999 13.1 10.5299 13.1ZM13.6399 8.41996C13.6399 8.41996 13.6399 8.42996 13.6399 8.41996V8.41996Z" />
                <path className="cls-1" _ngcontent-serverapp-c42 d="M5.79 16H1C0.45 16 0 15.55 0 15V1C0 0.45 0.45 0 1 0H5.79C6.34 0 6.79 0.45 6.79 1C6.79 1.55 6.34 2 5.79 2H2V13.99H5.78C6.33 13.99 6.78 14.44 6.78 14.99C6.79 15.55 6.34 16 5.79 16Z" />
              </svg>
              <span>Đăng xuất</span>
            </div>
          </div>
      </li>
      </>
    )
  }
  return (
    <>
    <li className={styles.btnLogin}>
      <Link href="/auth/login">Login</Link>
    </li>
    </>
  );
}
export default UserAuth;